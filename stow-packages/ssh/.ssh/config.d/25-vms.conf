# Virtual Machines SSH Configuration
# Managed by: ~/dev/projects/dotfiles/stow-packages/ssh
#
# IMPORTANT: This file is created from 25-vms.conf.template
# Add it to .gitignore if it contains sensitive information

# ============================================================================
# Local VMs (Parallels Desktop)
# ============================================================================

# Ubuntu Development VM on Parallels Desktop
# Local access via Shared Network (10.211.55.x)
Host ubuntu-dev ubuntu-dev4change
    HostName ubuntu-dev4change
    User matteocervelli
    Port 22
    IdentitiesOnly yes
    ForwardAgent yes
    # Connection multiplexing for faster subsequent connections
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%r@%h-%p
    ControlPersist 10m
    # Keep connections alive
    ServerAliveInterval 60
    ServerAliveCountMax 3
    # Local network optimizations
    Compression yes

# Ubuntu Development VM via Tailscale
# Access from any device in the tailnet (MacBook, other machines)
# PREREQUISITE: Install Tailscale on the Ubuntu VM first
Host ubuntu-dev-tailscale ubuntu-dev-ts
    HostName ubuntu-dev4change.siamese-dominant.ts.net
    User matteocervelli
    Port 22
    IdentitiesOnly yes
    ForwardAgent yes
    # Tailscale-specific optimizations
    StrictHostKeyChecking accept-new
    Ciphers chacha20-poly1305@openssh.com
    ServerAliveInterval 30
    ServerAliveCountMax 5
    # Connection multiplexing
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%r@%h-%p
    ControlPersist 10m

# Fedora Development VM on Parallels Desktop
# Local access via Shared Network (10.211.55.x)
Host fedora-dev fedora-dev4change
    HostName fedora-dev4change
    User matteocervelli
    Port 22
    IdentitiesOnly yes
    ForwardAgent yes
    # Connection multiplexing for faster subsequent connections
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%r@%h-%p
    ControlPersist 10m
    # Keep connections alive
    ServerAliveInterval 60
    ServerAliveCountMax 3
    # Local network optimizations
    Compression yes

# Fedora Development VM via Tailscale
# Access from any device in the tailnet (MacBook, other machines)
# PREREQUISITE: Install Tailscale on the Fedora VM first
Host fedora-dev-tailscale fedora-dev-ts
    HostName fedora-dev4change.siamese-dominant.ts.net
    User matteocervelli
    Port 22
    IdentitiesOnly yes
    ForwardAgent yes
    # Tailscale-specific optimizations
    StrictHostKeyChecking accept-new
    Ciphers chacha20-poly1305@openssh.com
    ServerAliveInterval 30
    ServerAliveCountMax 5
    # Connection multiplexing
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%r@%h-%p
    ControlPersist 10m

# ============================================================================
# VM Access Shortcuts
# ============================================================================

# Quick access from Mac Studio to Ubuntu VM (local network)
# Usage: ssh vm
Host vm ubuntu
    HostName ubuntu-dev4change
    User matteocervelli
    Port 22
    IdentitiesOnly yes
    ForwardAgent yes
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%r@%h-%p
    ControlPersist 10m

# Quick access from MacBook to Ubuntu VM (via Tailscale)
# Usage: ssh vm-remote
Host vm-remote ubuntu-remote
    HostName ubuntu-dev4change.siamese-dominant.ts.net
    User matteocervelli
    Port 22
    IdentitiesOnly yes
    ForwardAgent yes
    StrictHostKeyChecking accept-new
    Ciphers chacha20-poly1305@openssh.com
    ServerAliveInterval 30
    ServerAliveCountMax 5

# Quick access from Mac Studio to Fedora VM (local network)
# Usage: ssh vm
Host fedora
    HostName fedora-dev4change
    User matteocervelli
    Port 22
    IdentitiesOnly yes
    ForwardAgent yes
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%r@%h-%p
    ControlPersist 10m

# Quick access from MacBook to Fedora VM (via Tailscale)
# Usage: ssh vm-remote
Host fedora-remote
    HostName fedora-dev4change.siamese-dominant.ts.net
    User matteocervelli
    Port 22
    IdentitiesOnly yes
    ForwardAgent yes
    StrictHostKeyChecking accept-new
    Ciphers chacha20-poly1305@openssh.com
    ServerAliveInterval 30
    ServerAliveCountMax 5