# 1Password SSH Agent Configuration (macOS)
# Managed by: ~/dev/projects/dotfiles/stow-packages/ssh
#
# This file configures 1Password SSH agent on macOS.
# For Linux systems, use 02-1password-linux.conf instead.
#
# IMPORTANT: IdentitiesOnly prevents SSH from auto-loading ~/.ssh/id_* files
# which are 1Password references and cause errors during shell init.

# GitHub - use specific key only
Host github.com
    IdentityAgent "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
    IdentitiesOnly yes
    IgnoreUnknown UseKeychain

# VPS servers - allow agent to offer all keys
Host *-vps *-crm *-prod
    IdentityAgent "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
    IdentitiesOnly no
    IgnoreUnknown UseKeychain

# All other hosts - restrict to prevent auto-loading
Host *
    IdentityAgent "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
    IdentitiesOnly yes
    IgnoreUnknown UseKeychain
