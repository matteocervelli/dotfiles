# Guide 7: Fedora Kids Educational Environment Setup

**Purpose**: Transform a clean Fedora VM into a safe, educational learning environment for kids with parental controls, educational software, and simplified interface.

**Prerequisites**: Completed [Guide 6: Fedora Kids VM Creation](parallels-6-fedora-kids-vm-creation.md) - You have a Fedora VM with Parallels Tools installed and parent account configured.

**Result**: Fully configured kids' learning environment with educational software, parental controls, safe browsing, and supervised access.

---

## ðŸš€ Quick Start: Automated Setup (Recommended)

**NEW!** You can now automate most of this guide with our bootstrap script:

```bash
# Interactive mode (recommended for first-time setup)
./scripts/bootstrap/kids-fedora-bootstrap.sh

# Non-interactive mode (if you know exactly what you want)
./scripts/bootstrap/kids-fedora-bootstrap.sh \
    --child-name "Sofia" \
    --child-age 8 \
    --install-all \
    --skip-monitoring
```

### What the Script Automates (saves 2-3 hours)

âœ… **Base System Setup**: Calls `fedora-bootstrap.sh` for essential tools
âœ… **Educational Software**: Installs 40+ educational packages (or core-only)
âœ… **Kids' Account**: Creates restricted user account with NO sudo access
âœ… **Parental Controls**: Installs and configures Malcontent with OARS filtering
âœ… **Desktop Configuration**: Simplifies GNOME, pins educational apps, polkit rules
âœ… **Safe Browsing Setup**: Configures Firefox profile and provides DNS guidance
âœ… **Monitoring Tools**: Creates usage logging and parent dashboard scripts
âœ… **Parent Guide**: Generates comprehensive `PARENT-README.txt` with credentials

### What Still Needs Manual Setup (30-45 minutes)

âš ï¸ **Requires Parent Judgment**:

1. **Time Limits**: Set daily/weekly limits in Malcontent GUI (parents decide)
2. **App Whitelisting**: Choose which apps the child can access (age-dependent)
3. **Content Filter Level**: Adjust OARS rating strictness (4-6, 6-8, 8-10, 10-12)
4. **DNS Configuration**: Enable OpenDNS FamilyShield at network level (parent's choice)
5. **Firefox Extensions**: Install uBlock Origin, LeechBlock (manual review)
6. **Shared Folders**: Configure Parallels shared folders from macOS (parent-approved content)

### Philosophy: Hybrid Automation

This script follows an **educational, long-term, and safe** approach:

- **70% Automated**: Standard configs, reversible changes, low-risk setup
- **30% Manual**: Parent judgment calls that require understanding and customization
- **Teaching Moments**: Script explains WHY each safety layer exists
- **5-Layer Protection**: User restrictions â†’ Parental controls â†’ DNS filtering â†’ Browser safety â†’ Supervision

### Using the Bootstrap Script

```bash
# 1. Get the repository on the VM
cd /tmp
git clone https://github.com/matteocervelli/dotfiles.git
cd dotfiles

# 2. Run the kids' bootstrap (interactive)
./scripts/bootstrap/kids-fedora-bootstrap.sh

# 3. Follow the prompts:
#    - Child's name (username will be lowercase)
#    - Child's age (4-12)
#    - Software choice (all educational, core-only, or custom)
#    - Monitoring setup (recommended: yes)

# 4. Script runs for 20-30 minutes
# 5. Read the generated PARENT-README.txt in your home directory
# 6. Complete manual steps below

# Options:
#   --dry-run              Preview without making changes
#   --child-name NAME      Non-interactive: child's name
#   --child-age AGE        Non-interactive: age (4-12)
#   --install-all          Install all educational software
#   --core-only            Install core educational apps only
#   --skip-monitoring      Skip usage logging setup
#   --help                 Show detailed help
```

### After Bootstrap Completes

1. **Read** `~/PARENT-README.txt` (generated by script)
2. **Complete** manual steps in sections below
3. **Test** the environment (see Testing & Verification section)
4. **Create** VM snapshot (see Backup section)
5. **Review** `~/docs/guides/kids-fedora-usage.md` for ongoing management

---

## ðŸ“– Manual Setup Guide

**If you prefer manual setup** or need to complete the steps after bootstrap, follow the detailed sections below.

---

## Table of Contents

0. [Quick Start: Automated Setup](#-quick-start-automated-setup-recommended) â­ NEW
1. [Prerequisites Check](#prerequisites-check)
2. [Kids' User Account Setup](#kids-user-account-setup)
3. [Parental Controls](#parental-controls)
4. [Educational Software Installation](#educational-software-installation)
5. [Safe Browsing Configuration](#safe-browsing-configuration)
6. [Desktop Environment Simplification](#desktop-environment-simplification)
7. [Shared Folders for Content](#shared-folders-for-content)
8. [Time Limits and Usage Restrictions](#time-limits-and-usage-restrictions)
9. [Backup and Snapshots](#backup-and-snapshots)
10. [Testing & Verification](#testing--verification)
11. [Maintenance and Monitoring](#maintenance-and-monitoring)
12. [Troubleshooting](#troubleshooting)

---

## Prerequisites Check

### Required from Guide 3

Run these checks **inside the VM** (logged in as parent):

```bash
# 1. Fedora version
cat /etc/fedora-release

# 2. Parallels Tools installed
prltools -v

# 3. Parallels Tools service running
systemctl status prltools.service

# 4. Network working
ping -c 3 google.com

# 5. System is updated
sudo dnf check-update
```

**If all checks pass, proceed!** âœ…

---

## Kids' User Account Setup

### Architecture Overview

**Two-Account System:**

```
Parent Account (administrator)
    â†“ Full system control
    â†“ Can install software, configure settings
    â†“ Access to all parental control tools

Kids Account (standard user)
    â†“ Restricted permissions
    â†“ No sudo access
    â†“ Limited application access
    â†“ Safe, supervised environment
```

### Step 1: Create Kids' User Account

**From Terminal (parent account):**

```bash
# Create new user account for child
# Replace "sofia" with your child's name
KIDS_USERNAME="sofia"

sudo useradd -m -c "Sofia's Learning Account" -s /bin/bash "$KIDS_USERNAME"

# Set initial password (change at first login)
sudo passwd "$KIDS_USERNAME"
# Enter a simple password the child can remember

# Verify account created
id "$KIDS_USERNAME"
```

**Expected output:**
```
uid=1001(sofia) gid=1001(sofia) groups=1001(sofia)
```

### Step 2: Configure Kids' Account Settings

```bash
# Set password expiration (optional - require change every 90 days)
sudo chage -M 90 "$KIDS_USERNAME"

# Set account to require password on login (no auto-login)
sudo chage -E -1 "$KIDS_USERNAME"

# Verify settings
sudo chage -l "$KIDS_USERNAME"
```

### Step 3: Set Up Kids' Home Directory

```bash
# Create standard directories
sudo -u "$KIDS_USERNAME" mkdir -p /home/"$KIDS_USERNAME"/{Desktop,Documents,Downloads,Pictures,Videos,Music}

# Create Learning directory for educational materials
sudo -u "$KIDS_USERNAME" mkdir -p /home/"$KIDS_USERNAME"/Learning

# Set proper permissions
sudo chown -R "$KIDS_USERNAME":"$KIDS_USERNAME" /home/"$KIDS_USERNAME"
sudo chmod 750 /home/"$KIDS_USERNAME"

# Verify structure
ls -la /home/"$KIDS_USERNAME"/
```

### Step 4: Restrict sudo Access (Safety)

```bash
# Ensure kids' account is NOT in wheel/sudo group
sudo gpasswd -d "$KIDS_USERNAME" wheel 2>/dev/null || echo "User not in wheel group (good)"

# Verify no sudo access
sudo -l -U "$KIDS_USERNAME"
# Expected: "User sofia is not allowed to run sudo"
```

âœ… **Kids' account created with restricted permissions!**

---

## Parental Controls

### GNOME Parental Controls (Malcontent)

Fedora includes **Malcontent** for parental controls integration.

### Step 1: Install Parental Control Software

```bash
# Install malcontent (GNOME parental controls)
sudo dnf install -y malcontent malcontent-ui

# Verify installation
which malcontent-client
```

### Step 2: Configure Basic Restrictions

```bash
# Set app restrictions via command line
# Allow only specific apps (example)

# List installed apps
flatpak list --app
dnf list installed | grep -E 'education|game'

# Restrict specific apps (example: prevent installing new apps)
sudo malcontent-client set "$KIDS_USERNAME" app-install-filter flatpak-ref

# Allow specific educational apps
# (Configure via GNOME Settings GUI - more user-friendly)
```

### Step 3: Configure via GNOME Settings (Recommended)

**As parent account:**

1. Open **Settings** (Super key â†’ type "Settings")
2. Navigate to **Users** section
3. **Unlock** settings (click lock icon, enter parent password)
4. Select kids' account (e.g., "Sofia")
5. Click **"Parental Controls"** button

**Configure the following:**

#### Application Restrictions
- âœ… **Restrict app installation** to parent only
- âœ… **Filter applications** by age rating
- Set **Age Rating**: `3+` or `7+` (OARS ratings)

#### Web Restrictions
- âœ… **Restrict web browsers**
- âœ… **Filter web content**
- Block adult content categories

#### Time Limits (see dedicated section below)

### Step 4: Test Parental Controls

**Log in as kids' account and test:**

```bash
# Try to install software (should fail)
sudo dnf install some-package
# Expected: Password prompt fails or permission denied

# Try to access restricted app
# Should not appear in GNOME app grid
```

âœ… **Parental controls active!**

---

## Educational Software Installation

### Core Educational Software Packages

**As parent account, install educational software:**

```bash
# Update package lists
sudo dnf check-update

# Install educational software suite
sudo dnf install -y \
    gcompris-qt \
    tuxpaint \
    tuxmath \
    tuxtyping \
    childsplay \
    ktuberling \
    kanagram \
    khangman \
    kwordquiz \
    kalzium \
    marble \
    stellarium \
    scratch

# Install language learning
sudo dnf install -y \
    anki \
    klavaro

# Install creative tools
sudo dnf install -y \
    inkscape \
    gimp \
    audacity

# Install programming learning tools
sudo dnf install -y \
    python3 \
    python3-pip \
    python3-pygame
```

**Installation takes 10-20 minutes**

### Educational Software via Flatpak

```bash
# Install Flathub (if not already installed)
sudo flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo

# Install educational Flatpak apps
sudo flatpak install -y flathub org.kde.gcompris

# Install coding learning apps
sudo flatpak install -y flathub com.endlessm.encyclopedia.en
sudo flatpak install -y flathub org.gnome.Chess
```

### Verify Educational Software

```bash
# List installed educational packages
dnf list installed | grep -E 'gcompris|tux|child|education'

# List educational Flatpak apps
flatpak list --app | grep -E 'gcompris|education'
```

### Create Learning Shortcuts

**Create desktop shortcuts for kids:**

```bash
# Create desktop entry for GCompris (main educational app)
sudo -u "$KIDS_USERNAME" cat > /home/"$KIDS_USERNAME"/Desktop/GCompris.desktop << 'EOF'
[Desktop Entry]
Name=GCompris Educational Games
Comment=Educational software suite for kids
Exec=gcompris-qt
Icon=gcompris-qt
Terminal=false
Type=Application
Categories=Education;
EOF

# Make executable
sudo chmod +x /home/"$KIDS_USERNAME"/Desktop/GCompris.desktop

# Trust desktop file (GNOME security)
sudo -u "$KIDS_USERNAME" gio set /home/"$KIDS_USERNAME"/Desktop/GCompris.desktop metadata::trusted true
```

âœ… **Educational software installed!**

---

## Safe Browsing Configuration

### Browser Selection and Configuration

**Use Firefox with parental controls and extensions.**

### Step 1: Install and Configure Firefox

```bash
# Firefox is pre-installed on Fedora Workstation
# Verify installation
which firefox

# Create Firefox profile for kids
sudo -u "$KIDS_USERNAME" firefox -CreateProfile "$KIDS_USERNAME"
```

### Step 2: Configure Firefox Safety Settings

**Log in as kids' account, open Firefox:**

1. **Menu** â†’ **Settings** â†’ **Privacy & Security**

#### Privacy Settings
- âœ… **Enhanced Tracking Protection**: Strict
- âœ… **Send websites "Do Not Track" signal**: Always
- âœ… **Delete cookies and site data when Firefox is closed**: Optional

#### Permissions
- âœ… **Block pop-up windows**: On
- âœ… **Warn when websites try to install add-ons**: On
- âŒ **Location**: Block
- âŒ **Camera**: Block
- âŒ **Microphone**: Block
- âŒ **Notifications**: Block

#### History
- **Firefox will**: "Remember history" (parent can review)

### Step 3: Install Safety Extensions

**As kids' account, install Firefox extensions:**

1. **uBlock Origin** (ad blocker)
   - URL: https://addons.mozilla.org/firefox/addon/ublock-origin/
   - Blocks ads and trackers

2. **LeechBlock NG** (website time limits)
   - URL: https://addons.mozilla.org/firefox/addon/leechblock-ng/
   - Block distracting websites
   - Set time limits per site

3. **Web of Trust (WOT)** (site reputation)
   - URL: https://addons.mozilla.org/firefox/addon/wot-safe-browsing/
   - Warns about unsafe websites

### Step 4: Set Firefox as Default with Restrictions

**As parent account:**

```bash
# Set Firefox homepage to kid-friendly site
sudo -u "$KIDS_USERNAME" cat > /home/"$KIDS_USERNAME"/.mozilla/firefox/*.default-release/user.js << 'EOF'
// Kid-safe homepage
user_pref("browser.startup.homepage", "https://www.pbskids.org/");

// Disable private browsing (parent monitoring)
user_pref("browser.privatebrowsing.autostart", false);

// Disable ability to change homepage
user_pref("browser.startup.homepage_override.mstone", "ignore");

// Enable safe search
user_pref("browser.search.suggest.enabled", false);
EOF
```

### Step 5: DNS-based Content Filtering (Router Level)

**For maximum safety, configure at macOS level:**

**From macOS (parent's Mac):**

```bash
# Configure Mac to use family-safe DNS
# System Settings â†’ Network â†’ Wi-Fi â†’ Details â†’ DNS

# Add family-safe DNS servers:
# OpenDNS FamilyShield:
#   208.67.222.123
#   208.67.220.123

# Or Cloudflare for Families:
#   1.1.1.3
#   1.0.0.3

# OR configure in Parallels VM only:
```

**In Fedora VM:**

```bash
# Configure DNS for VM only
sudo nmcli connection modify "Wired connection 1" \
    ipv4.dns "208.67.222.123 208.67.220.123" \
    ipv4.ignore-auto-dns yes

# Restart network
sudo nmcli connection down "Wired connection 1"
sudo nmcli connection up "Wired connection 1"

# Verify DNS
nmcli dev show | grep DNS
```

### Step 6: Test Safe Browsing

**As kids' account, test:**

1. Open Firefox
2. Try accessing inappropriate content (should be blocked by DNS filter)
3. Verify ads are blocked (uBlock Origin)
4. Check homepage is kid-friendly

âœ… **Safe browsing configured!**

---

## Desktop Environment Simplification

### Simplify GNOME for Kids

**As parent account, configure kids' GNOME desktop:**

### Step 1: Install GNOME Extensions

```bash
# Install GNOME Extensions app
sudo dnf install -y gnome-extensions-app gnome-shell-extension-appindicator

# Install child-friendly extensions
sudo dnf install -y \
    gnome-shell-extension-dash-to-panel \
    gnome-shell-extension-apps-menu
```

### Step 2: Configure Desktop for Kids' Account

**Log in as kids' account, then:**

```bash
# Disable hot corners (prevent accidental activation)
gsettings set org.gnome.desktop.interface enable-hot-corners false

# Disable animations (faster performance)
gsettings set org.gnome.desktop.interface enable-animations false

# Larger text for readability
gsettings set org.gnome.desktop.interface text-scaling-factor 1.15

# Simpler wallpaper
gsettings set org.gnome.desktop.background picture-uri 'file:///usr/share/backgrounds/fedora-workstation/default.png'

# Show battery percentage
gsettings set org.gnome.desktop.interface show-battery-percentage true

# Simple dock (always visible)
gsettings set org.gnome.shell.extensions.dash-to-dock dock-fixed true
gsettings set org.gnome.shell.extensions.dash-to-dock dock-position 'BOTTOM'
```

### Step 3: Pin Educational Apps to Dock

```bash
# Add educational apps to favorites (dock)
gsettings set org.gnome.shell favorite-apps "['org.gnome.Nautilus.desktop', 'firefox.desktop', 'gcompris-qt.desktop', 'tuxpaint.desktop', 'org.gnome.TextEditor.desktop']"
```

### Step 4: Remove Unnecessary Icons

**Clean up desktop for simplicity:**

```bash
# Remove Home and Trash icons from desktop
gsettings set org.gnome.shell.extensions.ding show-home false
gsettings set org.gnome.shell.extensions.ding show-trash false
```

### Step 5: Lock Down Settings Access

**Prevent kids from changing critical settings:**

```bash
# As parent account, create polkit rule
sudo cat > /etc/polkit-1/rules.d/50-restrict-kids.rules << EOF
// Restrict kids' account from system settings changes
polkit.addRule(function(action, subject) {
    if (subject.user == "$KIDS_USERNAME") {
        if (action.id == "org.freedesktop.NetworkManager.settings.modify.system" ||
            action.id == "org.freedesktop.timedate1.set-time" ||
            action.id == "org.freedesktop.locale1.set-locale") {
            return polkit.Result.NO;
        }
    }
});
EOF

# Reload polkit
sudo systemctl restart polkit
```

âœ… **Desktop simplified for kids!**

---

## Shared Folders for Content

### Parallels Shared Folders Setup

**Share parent-approved content from Mac to VM.**

### Step 1: Configure Shared Folders (macOS)

**From Mac Studio/MacBook:**

1. **Parallels Desktop** â†’ Select Fedora VM
2. **Configure** (gear icon) â†’ **Options** â†’ **Sharing**
3. **Share Mac folders with Linux**: âœ… Enable

**Add Folders:**

1. Click **+** button
2. **Add folder**: `/Users/parent/Kids-Content/`
   - Create this folder on Mac first with educational materials
3. **Name**: `Kids-Content`
4. **Access rights**: **Read Only** (kids can't modify Mac files)
5. Click **OK**

### Step 2: Verify Shared Folders in VM

**As kids' account:**

```bash
# Check shared folders
ls /media/psf/

# Should show: Kids-Content/

# Check contents
ls /media/psf/Kids-Content/
```

### Step 3: Create Symlink for Easy Access

**As kids' account:**

```bash
# Create convenient symlink
ln -s /media/psf/Kids-Content ~/Learning-Materials

# Verify
ls -la ~/Learning-Materials
```

### Step 4: Populate Content (macOS)

**From Mac, add educational content:**

```bash
# Create structure
mkdir -p ~/Kids-Content/{Videos,Books,Games,Projects}

# Add sample content
# - Educational videos (MP4)
# - E-books (PDF, EPUB)
# - Learning projects
# - Parent-approved games
```

âœ… **Shared folders configured!**

---

## Time Limits and Usage Restrictions

### Using Malcontent for Time Limits

### Step 1: Set Daily Time Limits

**As parent account, via GNOME Settings:**

1. **Settings** â†’ **Users** â†’ Select kids' account
2. Click **"Parental Controls"**
3. **Time Limits** section:
   - **Monday-Friday**: 2 hours/day (example: after school)
   - **Saturday-Sunday**: 3 hours/day (example: weekend)

**Or via command line:**

```bash
# Set weekday limits (2 hours = 7200 seconds)
sudo malcontent-client set "$KIDS_USERNAME" \
    --disallow-peak-logins Mon-Fri 0:00-15:00 \
    --disallow-peak-logins Mon-Fri 19:00-23:59

# Set weekend limits (3 hours)
sudo malcontent-client set "$KIDS_USERNAME" \
    --disallow-peak-logins Sat-Sun 0:00-9:00 \
    --disallow-peak-logins Sat-Sun 20:00-23:59
```

### Step 2: Create Usage Tracking Script

**Monitor time spent:**

```bash
# Create tracking script
sudo cat > /usr/local/bin/kids-usage-log.sh << 'EOF'
#!/bin/bash
# Log kids' computer usage

KIDS_USERNAME="sofia"
LOG_FILE="/var/log/kids-usage.log"

# Check if kids' user is logged in
if who | grep -q "$KIDS_USERNAME"; then
    # Log session
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $KIDS_USERNAME logged in" >> "$LOG_FILE"
fi
EOF

sudo chmod +x /usr/local/bin/kids-usage-log.sh

# Run every 5 minutes via cron
echo "*/5 * * * * /usr/local/bin/kids-usage-log.sh" | sudo crontab -
```

### Step 3: Create Parent Dashboard

**Simple script to view usage:**

```bash
# Create dashboard script
cat > ~/kids-dashboard.sh << 'EOF'
#!/bin/bash
# Parent dashboard for kids' usage

echo "====================================="
echo "Kids' Computer Usage Dashboard"
echo "====================================="
echo ""

# Total logins today
echo "Logins Today:"
grep "$(date '+%Y-%m-%d')" /var/log/kids-usage.log | wc -l

# Last 10 logins
echo ""
echo "Recent Activity:"
tail -10 /var/log/kids-usage.log

# Current status
echo ""
echo "Current Status:"
if who | grep -q "sofia"; then
    echo "âœ… Sofia is currently logged in"
else
    echo "âŒ Sofia is not logged in"
fi
EOF

chmod +x ~/kids-dashboard.sh
```

### Step 4: Automatic Logout After Time Limit

**Force logout after daily limit:**

```bash
# Create auto-logout script
sudo cat > /usr/local/bin/kids-auto-logout.sh << 'EOF'
#!/bin/bash
# Auto-logout kids after time limit

KIDS_USERNAME="sofia"
DAILY_LIMIT_HOURS=2

# Calculate usage today
USAGE_TODAY=$(grep "$(date '+%Y-%m-%d')" /var/log/kids-usage.log | wc -l)
# Each log = 5 minutes (from cron), convert to hours
USAGE_HOURS=$((USAGE_TODAY * 5 / 60))

if [ "$USAGE_HOURS" -ge "$DAILY_LIMIT_HOURS" ]; then
    # Send warning notification
    sudo -u "$KIDS_USERNAME" DISPLAY=:0 notify-send "Time's Up!" "Computer time limit reached. Logging out in 5 minutes."

    sleep 300  # 5 minutes warning

    # Force logout
    pkill -KILL -u "$KIDS_USERNAME"
fi
EOF

sudo chmod +x /usr/local/bin/kids-auto-logout.sh

# Run hourly via cron
echo "0 * * * * /usr/local/bin/kids-auto-logout.sh" | sudo crontab -
```

âœ… **Time limits configured!**

---

## Backup and Snapshots

### VM Snapshot Strategy

**Create restore points for safety.**

### Step 1: Create Initial Snapshot (Parallels)

**From Parallels Desktop:**

1. **Virtual Machine** â†’ **Manage Snapshots...**
2. Click **"New"** (camera icon)
3. **Name**: "Fresh Kids Environment - 2025-10-26"
4. **Description**: "Initial setup with educational software, before first use"
5. Click **"OK"**

**Snapshot created!** (~5 minutes)

### Step 2: Regular Backup Schedule

**Recommended snapshot schedule:**

- **Weekly**: After installing new software
- **Monthly**: General backup
- **Before major changes**: Always snapshot first

### Step 3: Backup Important Data

**Backup kids' work to Mac:**

```bash
# From macOS, create backup script
cat > ~/backup-kids-vm.sh << 'EOF'
#!/bin/bash
# Backup kids' VM data to Mac

KIDS_USERNAME="sofia"
VM_SHARED_PATH="/media/psf/Home/Backups"
BACKUP_DIR="$HOME/Kids-VM-Backups/$(date '+%Y-%m-%d')"

mkdir -p "$BACKUP_DIR"

# Copy kids' Documents and Projects
rsync -av --progress \
    "$VM_SHARED_PATH/$KIDS_USERNAME/Documents/" \
    "$BACKUP_DIR/Documents/"

rsync -av --progress \
    "$VM_SHARED_PATH/$KIDS_USERNAME/Projects/" \
    "$BACKUP_DIR/Projects/"

echo "Backup complete: $BACKUP_DIR"
EOF

chmod +x ~/backup-kids-vm.sh

# Run weekly via macOS launchd or manually
```

âœ… **Backup strategy in place!**

---

## Testing & Verification

### Comprehensive Testing Checklist

**Test as kids' account:**

#### Basic Functionality
- [ ] Can log in with correct password
- [ ] Desktop loads with simplified interface
- [ ] Educational apps appear in dock
- [ ] Can launch GCompris, Tux Paint, etc.

#### Restrictions
- [ ] Cannot run `sudo` commands
- [ ] Cannot install new software
- [ ] Cannot modify system settings
- [ ] Cannot access parent's home directory

#### Safe Browsing
- [ ] Firefox opens with kid-friendly homepage
- [ ] DNS filtering blocks inappropriate sites
- [ ] Ad blocker working (uBlock Origin)
- [ ] Private browsing disabled

#### Shared Content
- [ ] Can access `/media/psf/Kids-Content/`
- [ ] Can open videos, documents from shared folder
- [ ] Cannot modify files in shared folder (read-only)

#### Time Limits
- [ ] Notification appears before time limit
- [ ] Automatic logout works after limit reached
- [ ] Usage logging functional

#### Parental Controls
- [ ] Age-restricted apps not visible
- [ ] App installation blocked
- [ ] System settings require parent password

**If all tests pass, environment is ready!** âœ…

---

## Maintenance and Monitoring

### Weekly Maintenance Tasks

**As parent account:**

```bash
# 1. Update system
sudo dnf upgrade -y

# 2. Check disk space
df -h /home/"$KIDS_USERNAME"

# 3. Review usage logs
tail -50 /var/log/kids-usage.log

# 4. Check for issues
journalctl -p 3 --since "1 week ago"

# 5. Backup kids' work
~/backup-kids-vm.sh
```

### Monthly Maintenance Tasks

```bash
# 1. Full system upgrade
sudo dnf upgrade --refresh -y

# 2. Clean package cache
sudo dnf clean all

# 3. Remove old logs
sudo journalctl --vacuum-time=30d

# 4. Create VM snapshot
# (Via Parallels Desktop GUI)

# 5. Review installed applications
dnf list installed | grep -E 'education|game'
```

### Monitoring Kids' Activity

**Parent dashboard:**

```bash
# Run daily
~/kids-dashboard.sh

# Check browser history
sudo -u "$KIDS_USERNAME" sqlite3 ~/.mozilla/firefox/*.default-release/places.sqlite \
    "SELECT url, title, datetime(visit_date/1000000,'unixepoch') FROM moz_places, moz_historyvisits WHERE moz_places.id=moz_historyvisits.place_id ORDER BY visit_date DESC LIMIT 20;"

# View application usage (requires tracking setup)
journalctl -u prltools.service | grep "$KIDS_USERNAME"
```

---

## Troubleshooting

### Issue: Kids Can't Log In

**Symptom**: Password not working

**Solution**:

```bash
# As parent, reset password
sudo passwd "$KIDS_USERNAME"

# Check account not locked
sudo passwd -S "$KIDS_USERNAME"
# Should show "PS" (password set)

# Unlock if locked
sudo passwd -u "$KIDS_USERNAME"
```

### Issue: Educational Apps Not Appearing

**Symptom**: Apps installed but not visible in GNOME

**Solution**:

```bash
# Regenerate desktop database
sudo update-desktop-database /usr/share/applications/

# Clear GNOME cache
rm -rf ~/.cache/gnome-shell/

# Restart GNOME Shell
# Press Alt+F2, type 'r', press Enter
```

### Issue: Time Limits Not Working

**Symptom**: Kids can use computer beyond limits

**Solution**:

```bash
# Check malcontent service
systemctl status accounts-daemon

# Verify rules
sudo malcontent-client get "$KIDS_USERNAME"

# Check cron jobs running
sudo crontab -l

# Verify log file exists
ls -la /var/log/kids-usage.log
```

### Issue: Shared Folders Not Accessible

**Symptom**: `/media/psf/Kids-Content/` empty or missing

**Solution**:

```bash
# Check Parallels Tools running
systemctl status prltools.service

# Restart Parallels Tools
sudo systemctl restart prltools.service

# Verify mount
mount | grep psf

# Check from macOS:
# Parallels Desktop â†’ VM Configuration â†’ Options â†’ Sharing
# Ensure "Share Mac folders" enabled
```

### Issue: Firefox Settings Reset

**Symptom**: Homepage or settings change unexpectedly

**Solution**:

```bash
# Lock Firefox preferences
sudo -u "$KIDS_USERNAME" cat >> ~/.mozilla/firefox/*.default-release/user.js << 'EOF'
// Lock preferences (cannot be changed)
lockPref("browser.startup.homepage", "https://www.pbskids.org/");
EOF

# Make user.js read-only
sudo chmod 444 /home/"$KIDS_USERNAME"/.mozilla/firefox/*.default-release/user.js
```

### Issue: DNS Filtering Not Working

**Symptom**: Inappropriate content accessible

**Solution**:

```bash
# Verify DNS settings
nmcli dev show | grep DNS

# Re-configure DNS
sudo nmcli connection modify "Wired connection 1" \
    ipv4.dns "208.67.222.123 208.67.220.123" \
    ipv4.ignore-auto-dns yes

# Restart network
sudo systemctl restart NetworkManager

# Test DNS
nslookup google.com
# Should show OpenDNS server: 208.67.222.123
```

---

## Summary

### What You Now Have

âœ… **Kids' User Account** - Restricted, safe, no sudo access
âœ… **Parental Controls** - App restrictions, age filtering, monitoring
âœ… **Educational Software** - GCompris, Tux Paint, learning apps
âœ… **Safe Browsing** - DNS filtering, Firefox safety extensions
âœ… **Simplified Desktop** - Kid-friendly GNOME environment
âœ… **Shared Content** - Parent-approved materials from Mac
âœ… **Time Limits** - Daily usage restrictions, auto-logout
âœ… **Monitoring** - Usage logs, activity tracking, parent dashboard
âœ… **Backup Strategy** - VM snapshots, data backups

### Daily Usage Workflow

**For Kids:**
1. **Start Mac** â†’ Open Parallels Desktop
2. **Start Fedora VM** â†’ Log in with kids' account
3. **Use computer** for learning and exploration
4. **Time limit reached** â†’ Automatic notification and logout
5. **Parents review** activity via dashboard

**For Parents:**
1. **Monitor usage** via dashboard script
2. **Review activity** in usage logs
3. **Update software** weekly
4. **Backup work** regularly
5. **Adjust restrictions** as needed

### Educational Resources

**Recommended websites (add to Firefox bookmarks):**
- PBS Kids: https://www.pbskids.org/
- National Geographic Kids: https://kids.nationalgeographic.com/
- NASA Kids' Club: https://www.nasa.gov/kidsclub/
- Scratch: https://scratch.mit.edu/ (programming)
- Khan Academy Kids: https://learn.khanacademy.org/
- Code.org: https://code.org/ (learn coding)

### Next Steps

**Customize for your child:**
- Add favorite educational apps
- Customize wallpaper and theme
- Create project directories
- Add bookmarks to learning sites
- Schedule regular review sessions

### Safety Tips

**For Parents:**
- âœ… Review activity logs weekly
- âœ… Adjust time limits as needed
- âœ… Keep system updated
- âœ… Maintain open communication about online safety
- âœ… Take snapshots before major changes
- âœ… Backup important work regularly

**For Kids:**
- ðŸŽ“ Explore and learn safely
- ðŸ›¡ï¸ Tell parents if something feels wrong
- â° Respect time limits
- ðŸ’¾ Save work regularly
- ðŸ¤ Ask for help when needed

---

## Related Documentation

- [Guide 3: Fedora VM Creation](parallels-3-fedora-vm-creation.md) - VM setup
- [Fedora Project](https://fedoraproject.org/) - Official documentation
- [GNOME Help](https://help.gnome.org/) - Desktop environment
- [OpenDNS FamilyShield](https://www.opendns.com/setupguide/) - DNS filtering

### Educational Software Documentation

- [GCompris](https://gcompris.net/) - Educational games for ages 2-10
- [Tux Paint](http://www.tuxpaint.org/) - Drawing program for children
- [Scratch](https://scratch.mit.edu/) - Visual programming for kids
- [Khan Academy](https://www.khanacademy.org/) - Free learning resources

---

**Created**: 2025-10-26
**Last Updated**: 2025-10-26
**Status**: âœ… Complete
**Part of**: FASE 7 - Multi-Platform OS Configurations
**Related**: [Issue #46](https://github.com/matteocervelli/dotfiles/issues/46) - Kids' Fedora VM Educational Profile
**Tested on**: Fedora Workstation 40 ARM64, Parallels Desktop 19.x, macOS Sequoia 15.x
