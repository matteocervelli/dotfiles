# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Changed

- **FASE 4.3: Documentation Restructuring** - Eliminated all guide overlaps (Issue #23 refinement)
  - **Restructured documentation** from 4 overlapping guides to 2 clear, sequential guides
  - **Created**: `docs/guides/parallels-1-vm-creation.md` (~420 lines)
    - Clean VM creation guide with ONLY VM setup, Ubuntu install, and Parallels Tools
    - Removed all dev setup content (Docker, dotfiles, projects) for clarity
    - Sequential workflow: Start here → Get empty VM ready
  - **Created**: `docs/guides/parallels-2-dev-setup.md` (~600 lines)
    - Comprehensive dev environment setup guide
    - Consolidated content from: vm-setup.md + docker-ubuntu-setup.md + parallels-vm-creation.md extras
    - Complete workflow: Shared folders → Docker → Dotfiles → R2 assets → Projects → Remote context → Testing
    - 10-part structure covering full development environment
    - Mac Studio project bindings via Parallels shared folders
  - **Deleted**: `docs/guides/parallels-vm-creation.md` (replaced by Guide 1)
  - **Deleted**: `docs/vm-setup.md` (consolidated into Guide 2)
  - **Deleted**: `docs/guides/docker-ubuntu-setup.md` (consolidated into Guide 2)
  - **Kept**: `docs/guides/linux-setup-guide.md` (different scope - multi-distro)
  - **Result**: Zero content overlap between guides
  - **Workflow**: Guide 1 (empty VM) → Guide 2 (full dev environment)

### Added

- **FASE 4.3: Parallels Integration & Testing** (Issue #23)
  - Complete Parallels shared folders setup, R2 assets workflow testing, and integration verification
  - `docs/vm-setup.md` - VM integration testing guide (~600 lines)
    - **Shared Folders Configuration** - Step-by-step Parallels bind mount setup
      - Configure custom folders in Parallels Desktop (~/media/cdn, ~/dev)
      - Verify mount points (`/media/psf/Home/...`)
      - Create convenient symlinks (`~/cdn`, `~/dev-shared`)
      - Test read/write access bidirectionally
      - Set up permanent mounts (optional /etc/fstab)
    - **R2 Assets Workflow** - Central library strategy implementation
      - Architecture: R2 → macOS (central library) → VM (via shared folders)
      - Zero duplication approach (VM reads from macOS)
      - Central manifest access (`~/cdn/.r2-manifest.yml`)
      - Asset directory access (logos, projects, shared)
      - Project-specific asset usage (symlink vs copy strategies)
    - **Project Setup Testing** - dev-setup.sh template verification
      - Test workflow with sample project creation
      - Manifest-based asset management
      - Asset accessibility from projects
    - **Docker Integration** - Container workflow with shared folders
      - Mount CDN in containers (read-only and read-write)
      - Test volume mounting from Parallels shared folders
      - Remote Docker context testing from macOS
      - Build containers with CDN assets
    - **Automated Testing** - Complete verification script
      - Test Parallels Tools installation and services
      - Verify shared folder mounts and permissions
      - Check CDN and dev directory accessibility
      - Validate read/write operations
      - Test symlink creation
      - Verify R2 manifest parsing
      - Test Docker integration with shared folders
    - **Manual Testing Checklist** - 75+ verification points
      - Prerequisites validation
      - Parallels Tools verification
      - Basic shared folders access
      - CDN directory access
      - Dev directory access
      - File operation tests (read, write, delete)
      - R2 assets workflow validation
      - Project setup testing
      - Docker integration testing
      - Performance benchmarks
    - **Troubleshooting** - Solutions for common integration issues
      - Shared folders not visible
      - Permission denied errors
      - Broken symlinks
      - Manifest access issues
      - Docker mount failures
      - Performance problems
  - `scripts/test/test-vm-integration.sh` - Automated integration testing (~200 lines)
    - 11 automated tests covering full integration stack
    - Colored output with pass/fail indicators
    - Verbose mode for debugging
    - Comprehensive error messages with fix suggestions
  - `docs/checklists/vm-integration-checklist.md` - Manual verification checklist (~150 lines)
    - Structured checklist with ~75 verification points
    - Pre-test setup verification
    - Step-by-step testing procedures
    - Expected outputs for each command
    - Troubleshooting references
    - Final sign-off criteria
  - **Bonus: VM Creation Guide** - `docs/guides/parallels-vm-creation.md` (~1000 lines)
    - Complete step-by-step guide for creating Ubuntu 24.04 LTS VMs from ISO
    - Not part of Issue #23 but valuable documentation for new VM setup
    - Cross-referenced from vm-setup.md for users who need to create VMs
  - **Central Library Strategy Benefits**:
    - ✅ Single source of truth (macOS central library)
    - ✅ No data duplication (VM reads directly from macOS)
    - ✅ Automatic sync (changes instantly visible in VM)
    - ✅ Efficient workflow (no separate R2 → VM sync)
  - **Testing Coverage**:
    - Automated tests: 11 integration tests
    - Manual checklist: ~75 verification points
    - Performance benchmarks: Read/write speed tests
    - End-to-end workflow: Real project simulation
  - **Integration Points**:
    - Shared folders: `~/media/cdn/` → `/media/psf/Home/media/cdn/` → `~/cdn/`
    - Dev directory: `~/dev/` → `/media/psf/Home/dev/` → `~/dev-shared/`
    - R2 manifest: `~/cdn/.r2-manifest.yml` accessible from VM
    - Docker volumes: Mount shared folders in containers
    - Remote Docker: Control VM Docker from macOS
  - **Acceptance Criteria** (Ready for testing):
    - ✅ Shared folders setup documented in docs/vm-setup.md
    - ✅ R2 assets workflow fully documented
    - ✅ Automated test script created (test-vm-integration.sh)
    - ✅ Manual testing checklist comprehensive
    - ⏳ **Pending**: Real VM testing on user's setup
    - ⏳ **Pending**: dev-setup.sh testing on actual projects
    - ⏳ **Pending**: Docker workflow verification
  - **Next Step**: Test on actual VM to verify all workflows

- **FASE 4.2: Ubuntu 24.04 LTS Bootstrap & Docker Setup** (Issue #22)
  - Complete Docker Engine + Compose v2 installation for Ubuntu 24.04 LTS
  - `scripts/bootstrap/install-docker.sh` - Standalone Docker installation script (~370 lines)
    - Official Docker repository setup (not Ubuntu's docker.io package)
    - GPG key verification for security
    - Docker Engine + Docker CLI + containerd installation
    - Docker Compose v2 plugin (integrated, not standalone)
    - Docker BuildKit plugin for advanced builds
    - User permissions (docker group) with logout requirement warning
    - systemd service configuration (enable on boot)
    - Post-install verification (docker version, hello-world test)
    - Comprehensive error handling and dry-run mode
    - Options: `--dry-run`, `--skip-user`, `--no-start`, `--verbose`
  - Updated `scripts/bootstrap/install-dependencies-ubuntu.sh` with `--with-docker` flag
    - Optional Docker installation during full Ubuntu bootstrap
    - Backward compatible (Docker not installed by default)
    - Integration with existing package installation workflow
  - `docs/guides/docker-ubuntu-setup.md` - Complete setup guide (~500 lines)
    - Prerequisites and quick start
    - Docker installation methods
    - Parallels VM configuration (CPU, RAM, disk recommendations)
    - Shared folders setup (/Users/matteo/dev → /mnt/dev)
    - Remote Docker context from macOS via SSH
    - Post-installation verification steps
    - Comprehensive troubleshooting section
    - Performance optimization tips
  - `docs/architecture/ADR/ADR-005-docker-ubuntu-installation.md` - Architecture decision record
    - Docker Engine vs Docker Desktop rationale
    - Official repository vs Ubuntu's docker.io
    - User group permissions strategy
    - Compose v2 plugin decision
    - SSH-based remote context approach
    - Parallels shared folders integration
    - Security considerations and alternatives
  - `tests/test-22-ubuntu-docker.bats` - Comprehensive test suite (48 tests, 100% passing)
    - Script existence and permissions validation
    - Help/usage output verification
    - Options and flags testing
    - Security checks (GPG, HTTPS, OS validation)
    - Integration tests (Makefile, Ubuntu bootstrap)
    - Documentation completeness
    - Code quality metrics (line limits, comments)
  - Makefile targets for Docker installation:
    - `make docker-install` - Install Docker Engine + Compose v2 (Ubuntu only)
    - `make ubuntu-full` - Install Ubuntu packages + Docker in one command
    - OS detection with clear error messages for non-Ubuntu systems
  - Features:
    - **Latest Docker** from official repository (24.0+)
    - **Compose v2** as plugin (faster, integrated)
    - **Remote access** from macOS via Docker context
    - **Parallels optimized** for shared folders and performance
    - **Idempotent** operations (safe to run multiple times)
    - **Security-focused** (GPG verification, HTTPS only, input validation)
  - Integration with FASE 4.1 (Linux package management foundation)
  - **Acceptance Criteria** (All met):
    - ✅ Ubuntu 24.04 LTS bootstrap installs all dependencies
    - ✅ Docker Engine + Compose v2 working natively
    - ✅ Docker starts automatically on boot (systemd)
    - ✅ Dotfiles work cross-platform (macOS/Linux)
    - ✅ Remote Docker context accessible from macOS
    - ✅ Parallels shared folders functional
  - Performance: Docker installation completes in 3-5 minutes
  - Documentation: 1000+ lines across guide, ADR, and test suite
  - **Serves as Docker foundation** for future FASE 7 implementations

- **FASE 4.1: Linux Package Management & Equivalents** (Issue #37)
  - Complete cross-platform package management foundation for Ubuntu, Fedora, and Arch Linux
  - `applications/linux/package-mappings.yml` - Comprehensive mapping of 271 macOS Homebrew packages to Linux equivalents
    - 92 Ubuntu (APT) packages
    - 91 Fedora (DNF) packages
    - 77 Arch Linux (Pacman) packages
  - `applications/linux/mapping-schema.yml` - Explicit data contract for package mappings with field definitions
  - `scripts/apps/audit-apps-linux.sh` - Multi-distro package audit script
    - Detects: APT, DNF, Pacman, Snap, Flatpak, AUR
    - Distribution detection (Ubuntu/Debian, Fedora/RHEL, Arch/Manjaro)
    - Categorized output by package manager
  - `scripts/apps/generate-linux-packages.sh` - Package list generator from YAML
    - Uses `yq` for YAML processing
    - Generates distro-specific package lists
    - Dry-run mode support
  - Bootstrap scripts for each distribution:
    - `scripts/bootstrap/install-dependencies-ubuntu.sh` - APT + Snap + Flatpak installation
    - `scripts/bootstrap/install-dependencies-fedora.sh` - DNF + Flatpak + COPR installation
    - `scripts/bootstrap/install-dependencies-arch.sh` - Pacman + AUR (yay/paru) + Flatpak installation
  - All scripts support: `--help`, `--dry-run`, `--essential-only`, `--verbose`
  - Generated package lists in `system/{ubuntu,fedora,arch}/packages.txt`
  - `tests/test-37-linux-packages.bats` - Comprehensive test suite (41 tests, 100% passing)
  - `applications/linux/README.md` - Complete workflow guide (~500 lines)
  - `docs/architecture/ADR/ADR-004-linux-package-management.md` - Architecture decision record with rationale
  - `docs/guides/linux-setup-guide.md` - Step-by-step setup guide for all three distros
  - Security features:
    - Input validation (no shell metacharacters)
    - GPG key verification for third-party repositories
    - Safe package name validation
  - Package manager preference order: Native > Flatpak > Snap > AUR
  - Open-source alternatives documented for proprietary software
  - Repository setup automation for: 1Password, GitHub CLI, Tailscale, Caddy, Google Cloud CLI
  - **Serves as foundation** for FASE 7 multi-platform configurations

- **FASE 7: Multi-Platform OS Configurations** (Milestone #8, Documentation Phase)
  - `docs/os-configurations/OVERVIEW.md` - Multi-platform architecture for 14+ environments
  - `docs/os-configurations/DEVICE-MATRIX.md` - Complete device/OS mapping with specifications
  - `docs/os-configurations/PROFILES.md` - Profile-based deployment system with composable roles
  - `docs/os-configurations/BOOTSTRAP-STRATEGIES.md` - OS-specific installation approaches
  - Expanded FASE 4 into comprehensive multi-platform strategy
  - Issue #22 scope expanded and moved to FASE 7.1 (Ubuntu 24.04 LTS Bootstrap & Docker)
  - Issue reorganization: Moved #37, #38, #39 from FASE 3 to FASE 7 (OS-specific scope)
  - 7 new platform-specific issues created: #40 (Fedora), #41 (Mint), #42 (Arch), #43 (Omarchy), #44 (Docker), #45 (VPS), #46 (Kids Fedora)
  - Issue #39 assigned to FASE 7.9 (Profile System Architecture)
  - Supported environments:
    - **macOS**: Mac Studio, MacBook (primary platforms)
    - **Parallels VMs**: Ubuntu 24.04, Fedora, Linux Mint Cinnamon, Windows 11, Fedora Kids
    - **UTM VMs**: Arch Linux, Omarchy (DHH's Linux)
    - **Docker**: Ubuntu minimal containers
    - **VPS**: Ubuntu headless (security-hardened)
    - **Infrastructure**: Synology NAS, CWWK OpnSense
    - **Future**: Minisforum self-hosting server
  - Profile system design: mac-studio, macbook, ubuntu-vm, vps-minimal, selfhosting, kids-safe, container-minimal
  - Role-based composition: development, infrastructure, media, productivity, security, education
  - Ubuntu 24.04 LTS selected as primary Linux version (vs 22.04 LTS)
  - Research: Omarchy (https://omarchy.org) - DHH's opinionated Linux distribution

- **XDG Base Directory Compliance** (FASE 3.4, Issue #21)
  - `scripts/xdg-compliance/app-mappings.yml` - Comprehensive application XDG compliance inventory (12 applications analyzed)
  - `docs/xdg-compliance.md` - Complete XDG compliance strategy and trade-offs documentation (~500 lines)
  - `stow-packages/dev-env/` - New stow package for XDG environment configuration
    - `.config/shell/dev-tools.sh` - XDG environment variables for PostgreSQL, Bash, Less, R (optional), Python (optional)
    - `.config/python/pythonrc` - Optional Python history redirection (complex setup, documented warnings)
    - Auto-migration functionality for legacy dotfiles to XDG locations
  - `stow-packages/iterm2/` - iTerm2 backup/restore workflow (macOS only)
    - `.local/bin/iterm2-backup` - Export iTerm2 preferences to XML/JSON for version control
    - `.local/bin/iterm2-restore` - Import iTerm2 preferences from backup
    - Backup directory structure with .gitignore for versioning
  - Updated `stow-packages/shell/` to source dev-tools.sh in .zshrc and .bashrc
  - `tests/test-21-xdg-compliance.bats` - Comprehensive BATS test suite (38 tests, all passing)
  - Hybrid XDG compliance approach:
    - ✅ **Supported** (5 apps): Git, PostgreSQL (psql), R, Less, Neovim - native XDG support
    - 🟡 **Partial** (2 apps): Bash, ZSH - history only (configs must stay in ~/)
    - ❌ **Hardcoded** (2 apps): VS Code (use Settings Sync), iTerm2 (backup/restore workflow)
    - ⚠️ **Complex** (2 apps): Vim (use Neovim instead), Python (optional, requires careful setup)
  - Documentation:
    - Per-application analysis with official sources and platform-specific downsides
    - Clear explanations of why certain apps should NOT be XDG compliant
    - Migration guides, rollback procedures, and troubleshooting
  - **Philosophy**: Pragmatism over purity - implement XDG where beneficial without breaking applications

- **Brewfile Management System** (FASE 3.2, Issue #20)
  - `scripts/apps/generate-brewfile.sh` - Generate organized Brewfile from application audit data (~450 lines)
  - `system/macos/Brewfile` - Homebrew package manifest with 271 packages (23 casks, 248 formulae, 0 mas apps)
  - Package categorization: Development Tools, Languages & Runtimes, Databases, Infrastructure, Security, CLI Utilities, Productivity, Media, System Libraries
  - `applications/vscode-extensions.txt` - VSCode extensions list (92 extensions) with installation commands
  - Makefile targets: `brewfile-generate`, `brewfile-check`, `brewfile-install`, `brewfile-update`
  - `system/macos/README.md` - Comprehensive Brewfile documentation (workflows, tips, troubleshooting)
  - `tests/test-20-brewfile.bats` - Complete test suite (40 tests, all passing)
  - Updated `applications/README.md` with Brewfile and VSCode extensions management sections
  - Dry-run mode support for safe preview before generation
  - Integration with audit-apps.sh for unified workflow
  - **Serves as baseline** for cross-platform package management (Issues #37, #38, #39)

- **Cross-Platform Package Management Planning** (Meta-issues for future development)
  - [Issue #37](https://github.com/matteocervelli/dotfiles/issues/37) - Ubuntu/Linux Package Management & Equivalents
  - [Issue #38](https://github.com/matteocervelli/dotfiles/issues/38) - Windows Package Management & Equivalents
  - [Issue #39](https://github.com/matteocervelli/dotfiles/issues/39) - Device-Specific Configurations (Mac Studio, MacBook, VM, VPS, self-hosting, NAS)

- **Application Management System** (FASE 3.1, Issue #19)
  - `scripts/apps/audit-apps.sh` - Comprehensive application discovery and listing (~450 lines)
  - `scripts/apps/cleanup-apps.sh` - Safe application removal with dry-run mode (~250 lines)
  - `applications/` directory structure with README and templates
  - `applications/README.md` - Complete workflow guide with examples and troubleshooting
  - `applications/keep-apps.txt` - Template for apps to preserve
  - `applications/remove-apps.txt` - Template for apps to remove
  - `tests/test-19-app-audit.bats` - Comprehensive BATS test suite (38 tests, 33/34 passing)
  - `docs/TECH-STACK.md` - Complete technology stack documentation
  - Application discovery from five sources:
    - Homebrew casks (GUI apps) via `brew list --cask`
    - Homebrew formulae (CLI tools) via `brew list --formula`
    - Mac App Store apps via `mas list`
    - Setapp apps from `/Applications/Setapp/`
    - Manual installations from `/Applications/*.app`
  - Timestamped audit reports: `current_macos_apps_YYYY-MM-DD.txt`
  - Smart removal detection (Homebrew vs manual)
  - Safety features:
    - Default dry-run mode (no deletions without explicit `--execute` flag)
    - User confirmation prompts before any removal
    - Input validation (comments and blank lines ignored)
    - Whitespace trimming for app names
    - Detailed logging to `applications/cleanup.log`
    - Path sanitization and validation
  - Workflow: Audit → Review → Categorize → Test (dry-run) → Execute
  - Categorized output with counts per source (5 sections)
  - Statistics reporting (removed/failed/skipped apps)
  - Integration with Brewfile management
  - Performance: < 10 seconds for audit, < 5 seconds for cleanup dry-run
  - Complete documentation in README.md, CLAUDE.md, and applications/README.md
  - **Bug fix**: Resolved critical `set -e` + conditional logging issue that caused silent failures
    - Added `|| true` to all conditional log statements to ensure proper exit codes

- **Auto-Update Dotfiles Mechanism** (FASE 2.6, Issue #18)
  - `scripts/sync/auto-update-dotfiles.sh` - Automatically sync dotfiles with pull-before-push strategy (100 lines)
  - `scripts/sync/install-autoupdate.sh` - Platform-specific installer for auto-update service (65 lines)
  - `system/macos/launch-agents/com.dotfiles.autoupdate.plist` - macOS LaunchAgent configuration (30 min interval)
  - `system/ubuntu/systemd/dotfiles-autoupdate.service` - Ubuntu systemd service configuration
  - `system/ubuntu/systemd/dotfiles-autoupdate.timer` - Ubuntu systemd timer (30 min interval, persistent)
  - `tests/test-18-auto-update-dotfiles.bats` - Comprehensive test suite (13 tests, all passing)
  - **Pull-Before-Push Strategy**: Automatically syncs changes across machines every 30 minutes
  - Smart sync workflow:
    1. Fetch remote changes first
    2. If remote has updates: stash local changes → pull with rebase → pop stash
    3. If no conflicts: commit local changes → push to GitHub
    4. If conflicts: log error and stop (manual intervention required)
  - Security features:
    - Only operates on main branch (skips feature branches to avoid conflicts)
    - Uses existing git credentials (SSH keys or 1Password integration)
    - Early exit when no changes detected (performance optimization)
    - User-level permissions (no sudo required for operation)
    - Safe stashing prevents data loss during pull operations
  - Conflict handling:
    - Automatic resolution for non-overlapping changes (different files)
    - Stops and logs error for real conflicts (same file, same lines)
    - Preserves local changes in git stash for manual resolution
    - Clear error messages with recovery instructions
  - Platform support:
    - macOS: LaunchAgent with launchctl integration, logs to `/tmp/dotfiles-autoupdate.log`
    - Ubuntu: systemd service + timer with journalctl logging
    - Auto-detection via existing `detect-os.sh` utility
  - Offline-safe: Gracefully handles network failures, retries next cycle
  - Commit message format: `chore: auto-update dotfiles from <hostname> - <timestamp>`
  - Easy installation: `./scripts/sync/install-autoupdate.sh`
  - Easy disable: `launchctl unload` (macOS) or `systemctl stop` (Ubuntu)
  - Logs available for debugging: stdout and stderr separated on macOS, journalctl on Ubuntu
  - Integration with existing dotfiles infrastructure (logger.sh, detect-os.sh)
- **Asset Management System Documentation** (FASE 2.X, Issue #34)
  - `sync/library/README.md` - Comprehensive central library guide with workflows, best practices, and troubleshooting
  - `templates/README.md` - Complete asset helpers documentation for TypeScript and Python
  - Updated `sync/manifests/README.md` - Added central library workflow, environment switching guide, and auto-update sections
  - Updated `sync/manifests/schema.yml` - Expanded field documentation with detailed use cases and examples
  - Updated `README.md` - Added comprehensive asset management system section with quick start and examples
  - Complete documentation for all asset management features (Issues #29-#32)
  - All workflows documented: library updates, project sync, auto-propagation, environment switching
  - Migration guides for existing projects
  - Security and performance best practices
  - Troubleshooting sections with common issues and solutions
  - Command reference tables with links to detailed documentation

- **Environment-Aware Asset Helpers** (FASE 2.X, Issue #32)
  - `templates/project/lib/assets.ts` - TypeScript/JavaScript asset URL resolver (370 lines)
  - `templates/project/lib/assets.py` - Python asset URL resolver (380 lines)
  - `templates/project/lib/__tests__/assets.test.ts` - Example Jest/Vitest tests (280 lines)
  - `templates/project/lib/tests/test_assets.py` - Example pytest tests (440 lines)
  - `tests/test-32-environment-helpers.bats` - BATS validation tests (57 tests)
  - Environment-aware URL resolution: local paths in dev, CDN URLs in production
  - Zero external dependencies for maximum compatibility
  - Support for three env modes: `cdn-production-local-dev` (default), `cdn-always`, `local-always`
  - TypeScript features:
    - AssetResolver singleton class with cached environment detection
    - getAssetUrl() convenience function
    - useAsset() React hook with useMemo optimization
    - batchResolveAssets() for multiple assets
    - Full TypeScript types and comprehensive JSDoc
  - Python features:
    - AssetResolver singleton class with @lru_cache performance optimization
    - get_asset_url() convenience function
    - batch_resolve_assets() for multiple assets
    - Complete type hints with typing module
    - Comprehensive docstrings with examples
  - Security features:
    - Path traversal prevention (rejects '..' in paths)
    - URL validation (HTTPS required in production)
    - Input sanitization for all parameters
  - Performance optimizations:
    - Environment detection cached (TypeScript: singleton pattern, Python: @lru_cache)
    - React hook memoization prevents unnecessary re-renders
    - Zero network calls (pure URL resolution)
  - Framework compatibility:
    - TypeScript: Next.js, Vite, React, any Node.js/browser environment
    - Python: FastAPI, Flask, Django, standalone applications
  - Auto-detects environment from NODE_ENV (TypeScript) or ENVIRONMENT (Python)
  - Manual override via ASSET_MODE environment variable (local, cdn, auto)
  - Comprehensive test suites included as templates for projects
  - All files under 500 lines, modular design
  - Ready-to-copy templates for project integration
- **Auto-Update Propagation Across Projects** (FASE 2.X, Issue #31)
  - `scripts/sync/update-cdn-and-notify.sh` - Orchestrate CDN update workflow with notifications and propagation (280 lines)
  - `scripts/sync/propagate-cdn-updates.sh` - Propagate library changes to all affected projects (570 lines)
  - `stow-packages/bin/.local/bin/update-cdn` - Convenience wrapper for update workflow
  - Interactive workflow with user confirmation prompts
  - Before/after comparison showing dimension and size changes
  - Project detection via source field and filename matching
  - Automatic manifest updates (checksum, size, dimensions)
  - Re-copy files from library to projects with verification
  - Optional git commits (off by default, `--git-commit` flag)
  - Optional R2 sync integration
  - Statistics reporting: projects scanned/updated/skipped, files copied
  - Colored terminal output: green (updates), gray (skips), red (errors)
  - Non-interactive modes: `--auto-propagate`, `--auto-sync`, `--no-propagate`, `--no-sync`
  - Performance: <5 minutes for 10+ projects (vs ~30 min manual)
  - Comprehensive test suite (`tests/test-31-auto-update.bats`) with 24 tests
  - Architecture decision record (`docs/architecture/ADR/ADR-003-auto-update-propagation.md`)
  - Integration with Issues #29 and #30 (notification and project sync systems)
  - Bash 3.2 compatible (macOS default shell)
  - Documentation updates in `sync/manifests/README.md` and `README.md`
- **Project Asset Sync with Library-First Strategy** (FASE 2.X, Issue #30)
  - `scripts/sync/generate-project-manifest.sh` - Generate project-specific manifests with library detection (570 lines)
  - `scripts/sync/sync-project-assets.sh` - Sync assets with library-first copy strategy and R2 fallback (680 lines)
  - `stow-packages/bin/.local/bin/sync-project` - Convenience wrapper for quick asset syncing
  - Library-first strategy: Try copy from `~/media/cdn/` (fast, <0.1s/file) → Fallback to R2 download (slower, 1-5s/file)
  - Smart sync modes in manifest:
    - `copy-from-library` - Copy from central library with R2 fallback
    - `download` - Download directly from R2
    - `cdn-only` - Verify CDN URL, skip local sync
    - `false` - Manual download required (shows instructions)
  - Device filtering: Skip assets not intended for current device (via `devices: [list]` in manifest)
  - Automatic library detection: Checks if project files exist in `~/media/cdn/` by filename matching
  - SHA256 checksum verification on all copy/download operations (prevents corruption)
  - Statistics reporting: Shows copied vs downloaded counts, library efficiency percentage
  - Colored terminal output: Green for library copies, blue for downloads, gray for skips
  - Project directory scanning: `public/media/`, `data/`, `public/images/`, `assets/`
  - Smart sync defaults: Files >100MB marked as manual download (`sync: false`)
  - Comprehensive test suite (`tests/test-30-project-sync.bats`) with 42 tests (41 passing, 97.6% pass rate)
  - Architecture decision record (`docs/architecture/ADR/ADR-002-project-asset-sync.md`)
  - Performance achieved: 90% library efficiency (45 copied, 5 downloaded typical project)
  - Integration with Issue #29 manifest system (reuses central library `.r2-manifest.yml`)
  - Bash 3.2 compatible (macOS default shell)

- **Enhanced R2 Manifest System with Dimension Extraction** (FASE 2.X, Issue #29)
  - `scripts/sync/generate-cdn-manifest.sh` - Automatic manifest generation with image dimension extraction using ImageMagick
  - `scripts/sync/notify-cdn-updates.sh` - Update notification system with before/after comparison and colored output
  - Enhanced `sync/manifests/schema.yml` with new fields:
    - `dimensions: {width, height}` - Automatic image dimension extraction
    - `env_mode` - Environment-aware asset resolution (cdn-production-local-dev, cdn-always, local-always)
    - Enhanced `sync` field - Smart sync strategies (copy-from-library, download, cdn-only)
  - Example 6 added to schema: Environment-aware assets with dimensions
  - Dimension caching system (`.dimensions-cache.json`) for 10x performance improvement
  - Content-based file type detection using `file` command (not extension-based)
  - Bash 3.2 compatibility for macOS (uses grep instead of associative arrays)
  - Colored terminal output with ANSI colors (green/red/yellow for changes)
  - Markdown report generation for commit messages
  - Comprehensive test suite (`tests/test-29-manifest-system.bats`) with 30 tests
  - Architecture decision record (`docs/architecture/ADR/ADR-001-manifest-dimension-extraction.md`)
  - Performance target achieved: 100 files in <10 seconds

- **R2 Manifest System** (`sync/manifests/`) - FASE 2.4 (Issue #16)
  - `sync/manifests/schema.yml` - Complete YAML schema definition with field types and examples
  - `sync/manifests/README.md` - Comprehensive documentation covering workflow, best practices, and troubleshooting
  - Schema defines structure for `.r2-manifest.yml` files in project roots
  - Manifest tracks binary assets: path, R2 key, size, SHA256 checksum, type, sync settings, device targeting
  - Asset types supported: model, dataset, media, video, audio, document, data
  - Selective sync with `sync: false` for manual-only downloads
  - Device targeting with `devices: [macbook, mac-studio]` for machine-specific assets
  - Integration with rclone, 1Password, and project dev-setup.sh scripts
  - Workflow documented: generate → push → pull → update → verify
  - Best practices: commit manifests to git, gitignore actual assets, selective sync, checksum verification
  - Troubleshooting guide for common issues (checksum mismatch, missing assets, large transfers)
  - Example manifests for AI/ML projects, datasets, media files, and empty projects
  - Scripts (to be implemented in FASE 2.5): generate-manifest.sh, sync-r2.sh, update-manifest.sh, verify-manifest.sh
- **Rclone Setup for R2** (`sync/rclone/`, `stow-packages/bin/`) - FASE 2.3 (Issue #15)
  - `sync/rclone/rclone.conf.template` - Configuration template with 1Password references
  - `sync/rclone/README.md` - Comprehensive documentation with setup, usage, and troubleshooting
  - `stow-packages/bin/.local/bin/setup-rclone` - Automated setup with 1Password secret injection (symlinkable)
  - `stow-packages/bin/.local/bin/test-rclone` - Connection testing and validation script (symlinkable)
  - `stow-packages/bin/.local/bin/rclone-cdn-sync` - Media CDN synchronization to R2 (migrated from ~/dev/scripts/)
  - Shell alias: `cdnsync` → `~/.local/bin/rclone-cdn-sync` (defined in shell package)
  - 1Password integration: Credentials stored in vault (Private/Cloudflare-R2)
  - Security: Config file permissions 600, gitignored, never committed
  - Remote configured: `remote-cdn:` for Cloudflare R2 bucket `media-adlimen`
  - Usage after stow: `setup-rclone` → `test-rclone` → `cdnsync`
  - Tested: ✅ Connection verified, 253 files in bucket
- **Project Setup Script Template** (`templates/project/`) - FASE 2.2 (Issue #14)
  - `dev-setup.sh.template` - Standard project initialization script for all projects
  - `README.md` - Comprehensive usage documentation with examples and troubleshooting
  - `.env.development.template` - Development environment template with 1Password references
  - `.env.production.template` - Production environment template with 1Password references
  - Automated workflow: Git clone/pull → Secret injection → Asset sync (R2) → Project-specific setup
  - Multi-level 1Password tagging system: [PROJECT] + [ENVIRONMENT] + [TYPE] + [CUSTOM]
  - Support for shared secrets across multiple projects via tags
  - Environment-aware configuration (development, staging, production)
  - Vault override support: `export OP_VAULT=Projects` for centralized vault strategy
  - `scripts/secrets/create-project-secret.sh` - CLI tool for creating 1Password secrets with proper categories
  - Supports proper 1Password item types: Database, API Credential, Login, Server (native fields)
  - Tag hierarchy enables flexible querying: by project, environment, type, or combinations
  - Example: `op item list --vault=Projects --tags=APP-Discreto,production,database`
- **Production Secret Management** (`templates/production/`) - FASE 2.2 (Issue #14)
  - `setup-prod-secrets.sh` - VPS setup script for Docker Secrets initialization
  - `.env.prod.template` - Production environment template (for VPS without 1Password)
  - Docker Secrets integration: encrypted at rest, mounted as files in `/run/secrets/`
  - One-time secret injection from 1Password to Docker Secrets on VPS
  - Security: Secrets stored encrypted, accessed via file mounts (not environment variables)
  - Integration with docker-compose for production deployments
- **1Password CLI Integration** (`scripts/secrets/`, `secrets/`) - FASE 2.1 (Issue #13)
  - `inject-env.sh` - Wrapper for `op inject` with authentication checking and validation
  - `validate-secrets.sh` - Verify secret injection completeness (detects remaining op:// references)
  - `template.env` - Standard .env template with 1Password reference examples
  - `docker-compose-op.yml` - Docker Compose example with 1Password integration
  - Automated secret injection from 1Password to .env files
  - Security: No secrets ever committed to git (gitignore configured)
  - Usage: `./scripts/secrets/inject-env.sh .env.template` (auto-generates .env)
  - Validation: `./scripts/secrets/validate-secrets.sh .env` (checks for uninjected refs)
  - Intended workflow: Each project has `dev-setup.sh` script that calls inject-env.sh
  - Cross-platform support (macOS, Linux)
- **Makefile orchestration** (`Makefile`) - FASE 1.9
  - Unified command interface for dotfiles management
  - `make help` - Display all available commands with examples
  - `make install` - Full installation (bootstrap + stow + health)
  - `make bootstrap` - Install dependencies only
  - `make stow` / `make stow-all` - Stow all packages (create symlinks)
  - `make stow-dry-run` / `make stow-all-dry-run` - Preview all packages before stowing (dry-run mode)
  - `make unstow` - Remove all symlinks
  - `make stow-package PKG=<name>` - Stow single package
  - `make stow-package-dry-run PKG=<name>` - Preview single package before stowing (dry-run mode)
  - `make health` - Run comprehensive health checks
  - `make backup` - Backup current configurations (placeholder, full implementation in FASE 2)
  - `make clean` - Clean temporary files (.DS_Store, *.tmp, *.log)
  - Formatted help menu with usage examples and emoji indicators
  - Integration with all existing scripts in `scripts/` directory
  - All stow operations support dry-run mode for safe preview before applying changes
- Health check scripts (`scripts/health/`) - FASE 1.8
  - `check-stow.sh` - Verify GNU Stow symlinks point to correct dotfiles locations
  - `check-all.sh` - Comprehensive health check (OS, dependencies, 1Password auth, symlinks, Git config)
  - Support for verbose mode (`-v`) to show all checks including successful ones
  - Proper exit codes: 0 (success), 1 (failures detected)
  - Smart symlink verification with relative path resolution (GNU Stow compatibility)
  - Actionable error messages with suggested fixes
  - Statistics summary: total checks, passed, warnings, failed
- Stow automation scripts (`scripts/stow/`) - FASE 1.7
  - `stow-all.sh` - Batch installer for all stow packages with statistics
  - `stow-package.sh` - Individual package manager with --no-folding support
  - `unstow-all.sh` - Batch uninstaller with safety confirmation and dry-run
  - Comprehensive error handling and user feedback
  - Dry-run mode support across all scripts
  - Verbose and quiet output modes
- SSH configuration package (`stow-packages/ssh/`) - FASE 1.6
  - Modular SSH configuration with `config.d/` directory structure
  - Cross-platform support (macOS and Linux) with platform-specific 1Password agent paths
  - Complete Tailscale network configuration for all devices (studio, macbook, nas, sara's devices)
  - GitHub SSH configuration with 1Password authentication
  - VPS servers configuration (`30-vps.conf`) - tracked in git
  - Work/client servers template (`40-work.conf.template`) - gitignored
  - Connection multiplexing with ControlMaster for faster SSH
  - Include directive for modular config file loading
  - Comprehensive README with usage examples and troubleshooting
- Git configuration package (`stow-packages/git/`) - FASE 1.6
  - Complete `.gitconfig` with 1Password SSH signing integration
  - Comprehensive Git aliases (30+ shortcuts for common operations)
  - Minimal `.gitignore_global` with gitignore.io-first philosophy
  - Git hooks template directory (`.git-templates/hooks/`)
  - SSH allowed signers file for commit verification
  - Machine-specific override template (`.gitconfig.local.template`)
  - Cross-platform support (macOS, Linux, Windows via WSL)
  - Comprehensive documentation and troubleshooting guide
- Bootstrap scripts for automated dependency installation (FASE 1.5)
  - macOS bootstrap with Homebrew-based installation
  - Ubuntu bootstrap with apt/wget-based installation
  - Master install orchestrator with automatic OS detection
  - Idempotent operations: safe to run multiple times
  - Dependencies installed: GNU Stow, 1Password CLI, Rclone, yq
- OS detection utility (`scripts/utils/detect-os.sh`)
- Logging utilities with colored output (`scripts/utils/logger.sh`)

### Changed

- **Project Organization**: Reorganized LLM tools package for better sprint alignment
  - Separated 1Password package (Issue #9) from LLM tools configuration
  - Moved llm-tools package from FASE 1.6 to FASE 3.5 (Issue #28)
  - Rationale: FASE 1 focuses on essential foundations, FASE 3 on application configurations
  - 1Password remains in FASE 1 (required for secret management in subsequent phases)
  - LLM tools (Claude Code, MCP servers) now grouped with other dev applications
- Shell package (`stow-packages/shell/`) - Removed Tailscale SSH aliases
  - Removed `alias macbook` and `alias macstudio` from `aliases.sh`
  - Replaced with professional SSH config approach (better cross-tool compatibility)
  - Added comment referencing new SSH config location

## [0.1.0] - 2025-01-17

### Added

- Initial project structure
- Documentation framework
- GNU Stow-based dotfiles management architecture
